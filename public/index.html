<!DOCTYPE html>
<html lang="ar" dir="rtl">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ุชุญุฏู ุงูุตูุฑ</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@400;500;700;800;900&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="/css/style.css">
</head>

<body>

  <!-- ========== LOBBY SCREEN ========== -->
  <div id="lobby-screen" class="screen active">
    <div class="lobby-container">
      <div class="logo-section">
        <div class="logo-icon">๐งฉ</div>
        <h1>ุชุญุฏู ุงูุตูุฑ</h1>
        <p class="subtitle">ุฑููุจ ุงูุตูุฑ ูุงุญุฒุฑ ุงูุฌูุงุจ!</p>
      </div>

      <div class="lobby-cards">
        <!-- Create Room -->
        <div class="lobby-card create-card">
          <div class="card-icon">๐ฎ</div>
          <h2>ุฃูุดุฆ ุบุฑูุฉ</h2>
          <input type="text" id="host-name" placeholder="ุงุณูู" maxlength="15" class="input-field">
          <button id="create-btn" class="btn btn-primary">ุฃูุดุฆ ุบุฑูุฉ ุฌุฏูุฏุฉ</button>
        </div>

        <!-- Join Room -->
        <div class="lobby-card join-card">
          <div class="card-icon">๐ช</div>
          <h2>ุงูุถู ูุบุฑูุฉ</h2>
          <input type="text" id="player-name" placeholder="ุงุณูู" maxlength="15" class="input-field">
          <input type="text" id="room-code-input" placeholder="ุฑูุฒ ุงูุบุฑูุฉ" maxlength="4" class="input-field code-input"
            style="text-transform: uppercase;">

          <!-- Team Selection -->
          <div id="team-select-area" class="team-select-area hidden">
            <p class="team-select-label">ุงุฎุชุฑ ูุฑููู:</p>
            <div class="team-select-buttons">
              <button class="team-select-btn red-select" data-team="red">
                <span class="team-dot red-dot"></span>
                <span>ุงูุฃุญูุฑ</span>
                <span class="team-count" id="red-count-display">(0/2)</span>
              </button>
              <button class="team-select-btn blue-select" data-team="blue">
                <span class="team-dot blue-dot"></span>
                <span>ุงูุฃุฒุฑู</span>
                <span class="team-count" id="blue-count-display">(0/2)</span>
              </button>
            </div>
          </div>

          <button id="join-btn" class="btn btn-secondary" disabled>ุงูุถู</button>
          <div id="join-error" class="error-msg hidden"></div>
        </div>
      </div>

      <div id="lobby-error" class="error-msg hidden"></div>
    </div>
  </div>

  <!-- ========== GAME SCREEN ========== -->
  <div id="game-screen" class="screen">
    <div class="game-container">

      <!-- Header -->
      <div class="game-header">
        <div class="room-info">
          <span class="room-badge">๐งฉ ุงูุบุฑูุฉ: <strong id="display-room-code"></strong></span>
          <span class="round-badge" id="round-badge">ุงูุฌููุฉ: --</span>
        </div>
        <div class="score-board">
          <div class="score-team score-red">
            <span class="team-dot red-dot"></span>
            <span>ุงูุฃุญูุฑ</span>
            <strong id="score-red">0</strong>
          </div>
          <span class="score-vs">VS</span>
          <div class="score-team score-blue">
            <span class="team-dot blue-dot"></span>
            <span>ุงูุฃุฒุฑู</span>
            <strong id="score-blue">0</strong>
          </div>
        </div>
      </div>

      <!-- HOST CONTROLS -->
      <div id="host-section" class="host-section hidden">
        <div class="host-panel">
          <h3>๐ฎ ููุญุฉ ุงูุชุญูู</h3>

          <div id="upload-area" class="upload-area">
            <div class="upload-header">
              <label>ุนุฏุฏ ุงูุตูุฑ:</label>
              <div class="image-count-selector">
                <button class="count-btn" data-count="1">1</button>
                <button class="count-btn active" data-count="2">2</button>
                <button class="count-btn" data-count="3">3</button>
                <button class="count-btn" data-count="4">4</button>
              </div>
            </div>
            <div id="image-slots" class="image-slots"></div>
            <div class="answer-section">
              <input type="text" id="answer-input" placeholder="ุงูุชุจ ุงูุฌูุงุจ (ูุฎูู ุนู ุงููุฑู)..."
                class="input-field answer-field">
            </div>
            <button id="start-round-btn" class="btn btn-success" disabled>๐ ุงุจุฏุฃ ุงูุฌููุฉ</button>
          </div>

          <!-- Judge controls -->
          <div id="judge-controls" class="judge-controls hidden">
            <div class="judge-info">
              <div class="buzzer-name-display">
                <span>๐ ุถุบุท ุงูุฒุฑ:</span>
                <strong id="buzzed-player-name"></strong>
                <span id="buzzed-team-badge" class="buzzed-team-badge"></span>
              </div>
              <div class="judge-answer-hint">
                <span>ุงูุฌูุงุจ:</span>
                <strong id="judge-answer-text"></strong>
              </div>
            </div>
            <div class="judge-buttons">
              <button id="judge-correct-btn" class="btn btn-correct">โ ุตุญ</button>
              <button id="judge-wrong-btn" class="btn btn-wrong">โ ุฎุทุฃ</button>
            </div>
          </div>

          <!-- Host action buttons (skip, unblock, new round) -->
          <div id="host-actions" class="host-actions hidden">
            <div class="host-actions-row">
              <button id="skip-round-btn" class="btn btn-skip">โญ๏ธ ุชุฎุทู ุงูุฌููุฉ</button>
              <button id="new-round-btn" class="btn btn-primary">๐ ุฌููุฉ ุฌุฏูุฏุฉ</button>
            </div>
            <!-- Unblock buttons -->
            <div id="unblock-area" class="unblock-area hidden">
              <p class="unblock-label">ุฃุฑุฌุน ูุฑูู ูุฌุงูุจ:</p>
              <div class="unblock-buttons">
                <button id="unblock-red-btn" class="btn btn-unblock-red hidden">๐ ุฑุฌูุน ุงูุฃุญูุฑ</button>
                <button id="unblock-blue-btn" class="btn btn-unblock-blue hidden">๐ ุฑุฌูุน ุงูุฃุฒุฑู</button>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- IMAGES DISPLAY -->
      <div id="images-display" class="images-display hidden"></div>

      <!-- BUZZ BUTTON (for players) -->
      <div id="buzz-section" class="buzz-section hidden">
        <button id="buzz-btn" class="buzz-button">
          <span class="buzz-icon">๐</span>
          <span class="buzz-text">ุงุถุบุท!</span>
        </button>
      </div>

      <!-- BUZZED STATUS -->
      <div id="buzzed-status" class="buzzed-status hidden">
        <div class="buzzed-card">
          <span class="buzzed-icon">๐</span>
          <span id="buzzed-name-display" class="buzzed-name"></span>
          <span class="buzzed-waiting">ุจุงูุชุธุงุฑ ุญูู ุงูููุณุช...</span>
        </div>
      </div>

      <!-- TEAMS DISPLAY -->
      <div class="teams-area">
        <div class="team-box team-red-box">
          <div class="team-header red-header">
            <span class="team-dot red-dot"></span>
            <h3>ุงููุฑูู ุงูุฃุญูุฑ</h3>
          </div>
          <ul id="team-red-players" class="player-list"></ul>
          <div id="red-guesses" class="team-guesses"></div>
        </div>

        <div class="team-box team-blue-box">
          <div class="team-header blue-header">
            <span class="team-dot blue-dot"></span>
            <h3>ุงููุฑูู ุงูุฃุฒุฑู</h3>
          </div>
          <ul id="team-blue-players" class="player-list"></ul>
          <div id="blue-guesses" class="team-guesses"></div>
        </div>
      </div>

      <!-- ROUND RESULT OVERLAY -->
      <div id="result-overlay" class="result-overlay hidden">
        <div class="result-card">
          <div class="result-emoji" id="result-emoji">๐</div>
          <h2 id="result-title">ุงูุฌูุงุจ ุงูุตุญูุญ!</h2>
          <p id="result-answer" class="result-answer"></p>
          <p id="result-detail" class="result-detail"></p>
        </div>
      </div>
    </div>
  </div>

  <!-- IMAGE LIGHTBOX -->
  <div id="lightbox" class="lightbox hidden" onclick="closeLightbox()">
    <div class="lightbox-content">
      <img id="lightbox-img" src="" alt="ุตูุฑุฉ ููุจุฑุฉ">
      <button class="lightbox-close" onclick="closeLightbox()">โ</button>
    </div>
  </div>

  <!-- ROOM CLOSED OVERLAY -->
  <div id="closed-overlay" class="result-overlay hidden">
    <div class="result-card">
      <div class="result-emoji">๐ข</div>
      <h2>ุงูุบุฑูุฉ ุงููููุช</h2>
      <p>ุงูููุณุช ุทูุน ูู ุงูุบุฑูุฉ</p>
      <button onclick="location.reload()" class="btn btn-primary" style="margin-top:1rem">ุฑุฌูุน</button>
    </div>
  </div>

  <script src="/socket.io/socket.io.js"></script>
  <script src="/js/app.js"></script>
</body>

</html>
